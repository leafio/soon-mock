(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5449:function(e,s,t){Promise.resolve().then(t.bind(t,2174))},2174:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return sN}});var a=t(7437),l=t(985),n=t(4962);let i=(0,l.h1)({baseURL:"/soon-mock",afterResponse:(e,s)=>{let{resolve:t,reject:a}=s;if(e.ok)t(e.body.data);else{var l,i;n.ZP.error(null!==(i=null!==(l=e.statusText)&&void 0!==l?l:e.status)&&void 0!==i?i:e.error)}}}),{API:r}=i;var c=t(9099);let d={},o=(0,c.Ue)(e=>({newSchema:void 0,setNewSchema:s=>e(()=>({newSchema:s})),selectedSchemaIndex:void 0,setSelectedSchemaIndex:s=>e(()=>({selectedSchemaIndex:s})),schemaList:[],apiList:[],config:d,refreshSchemaList:async()=>{let s=await I();return e({schemaList:s}),s},refreshApiList:async()=>{let s=await b();return e({apiList:s}),s},refreshConfig:async()=>{let s=await k(),t=await D();return s.api.groupTree=t,e({config:s}),s},refreshStore:async()=>{let[s,t,a,l]=await Promise.all([I(),b(),k(),D()]);a.api.groupTree=l,e({schemaList:s,apiList:t,config:a})}})),u=(e,s,t,a)=>{let l=[];return l=""===e?a.filter(e=>!e.group):a.filter(s=>s.group===e),{path:e,api_count:l.length,apiList:l,name:s,children:t.map(s=>u((e?[e,s.name]:[s.name]).join(","),s.name,s.children,a))}},m=()=>{var e;let s=o.getState(),t=u("","",null===(e=s.config)||void 0===e?void 0:e.api.groupTree,s.apiList);return console.log("tree",t),t},x=e=>{var s;let t=[];return null===(s=e.match(/\:([^:\/\d]+)\/?/g))||void 0===s||s.forEach(e=>{t.push(e.replace(/\//g,"").replace(/:/g,""))}),t},p=e=>{let s=JSON.parse(JSON.stringify(e)),t={dataType:"object",fields:[]},a={dataType:"object",fields:[]},l={dataType:"object",fields:[]};return e.request?(e.request.body||(s.request.body=t),e.request.params||(s.request.params=a),e.request.query||(s.request.query=l)):s.request={params:a,body:t,query:l},e.response.body?e.response.body.fields||(s.response.body.fields=[]):s.response.body=t,e.actionCode||(s.actions=[]),JSON.parse(JSON.stringify(s))},h=e=>{if(e)return f(o.getState().schemaList,e.split("."))},f=(e,s)=>{if(s.length){let t=s[0];s.shift();let a=e.find(e=>e.name===t);return(a||e.some(s=>{if(void 0===s.name){let s=e.find(e=>e.name===t);if(s)return a=s,!0}}),a&&a.fields&&s.length)?f(a.fields,s):a}};function j(e){let s;try{s=Function('"use strict";return ('+e+")")()}catch(e){}return s}let b=async()=>(await i.get("list_api")).map(e=>p(e)),v=r("add_api").POST(),g=r("update_api").POST(),N=r("del_api").POST(),y=r("move_api").POST(),w=r("gen_template_apiList").POST(),S=r("gen_schemas_apis").POST(),C=r("gen_schema_apis").POST(),k=async()=>await i.get("get_config"),T=r("set_config").POST(),A=r("set_api_group_name").POST(),P=r("add_api_group").POST(),E=r("del_api_group").POST(),D=r("group_tree").GET(),_=r("get_table_data").GET(),O=r("add_table_data").POST(),R=r("empty_table_data").DELETE(),F=r("del_table_data").DELETE(),L=r("update_table_data").POST(),G=r("batch_add_table_data").POST(),Z=e=>i.post("import_table_data",e),q=r("update_json_data").POST(),I=async()=>await i.get("list_schema"),J=r("add_schema").POST(),K=r("update_schema").POST(),B=r("del_schema").POST();r("detail_schema").GET(),r("get_faker_options").GET();let U=r("gen_fields_by_json").POST(),z=r("refresh").POST();var M=t(2265),V=t(9186);let H={POST:"text-orange-400",GET:"text-green-400",DELETE:"text-red-500",PUT:"text-blue-400",PATCH:"text-purple-400"};function W(e){let{method:s,className:t="",onClick:l}=e;return(0,a.jsx)("div",{className:"font-bold  cursor-pointer ".concat(t," ").concat(H[s]," "),onClick:l,children:"DELETE"===s?"DEL":s})}var X=t(4754),Q=t(4887);let Y=(0,M.forwardRef)((e,s)=>{let{children:t,rect:l,placement:n,zIndex:i}=e,r=(0,M.useRef)(null),[c,d]=(0,M.useState)({});(0,M.useLayoutEffect)(()=>{let{width:e,height:s}=r.current.getBoundingClientRect();if(l){let t={x:l.x-e/2+l.width/2,y:l.y-s};"top-left"===n?(t.x=l.x-e,t.y=l.y):"top"===n?(t.x=l.x+l.width/2-e/2,t.y=l.y-s):"bottom"===n?(t.x=l.x+l.width/2-e/2,t.y=l.y+l.height):"left"===n&&(t.x=l.x-e,t.y=l.y-s/2),t.y+s>document.body.clientHeight&&(t.y=l.y+l.height-s),t.x<0?t.x=0:t.x+e>document.body.clientWidth&&(t.x=document.body.clientWidth-e),d({transform:"translate3d(".concat(t.x,"px, ").concat(t.y,"px, 0)"),zIndex:i})}},[l,n,i]);let o=()=>r.current;(0,M.useImperativeHandle)(s,()=>({getDom:o}));let u=(0,a.jsx)("div",{ref:r,className:" absolute left-0 top-0",style:c,children:t});return(0,Q.createPortal)(u,document.body)});var $=e=>{let s,t,{className:l="",children:n,placement:i="top",content:r,trigger:c="hover",zIndex:d=1,clickClose:o=!1,disabled:u}=e,m=(0,M.useRef)(null),[x,p]=(0,M.useState)(),h=(0,M.useRef)(),f=e=>{var s;!h.current||(null===(s=h.current.getDom())||void 0===s?void 0:s.contains(e.target))||(b(!1),document.body.removeEventListener("click",f))};(0,M.useEffect)(()=>(p(m.current.getBoundingClientRect()),()=>{g.current&&clearTimeout(g.current),c.includes("click")&&document.body.removeEventListener("click",f)}),[]);let[j,b]=(0,M.useState)(!1);(0,M.useEffect)(()=>{},[j]);let v="function"==typeof r?r(j,b):r,g=(0,M.useRef)(null);return(0,a.jsxs)("div",{className:" relative "+l,ref:m,...(s=Array.isArray(c)?c:[c],t={},s.forEach(e=>{e.indexOf("hover")>-1&&(t.onPointerOver=()=>{g.current&&clearTimeout(g.current),p(m.current.getBoundingClientRect()),b(!0)},t.onPointerOut=()=>{g.current=setTimeout(()=>{b(!1)},200)}),e.indexOf("click")>-1&&(t.onClick=()=>{p(m.current.getBoundingClientRect()),j||b(!j),o&&b(!j),j||setTimeout(()=>{document.body.removeEventListener("click",f),document.body.addEventListener("click",f)})})}),t),children:[n&&"function"==typeof n?n(j,b):n,!u&&j&&(0,a.jsx)(Y,{rect:x,placement:i,zIndex:d,ref:h,children:v})]})};function ee(e){let{value:s,onChange:t,className:l=""}=e,n=["GET","POST","PUT","PATCH","DELETE"];return(0,a.jsx)($,{placement:"bottom",trigger:"click",content:(e,s)=>(0,a.jsx)("div",{className:" bg-white w-[6.5rem] px-2 drop-shadow-2xl",children:n.map(l=>(0,a.jsx)(W,{className:" py-0.5",method:l,onClick:()=>{t(l),s(!e)}},l))}),children:(0,a.jsxs)("div",{className:"flex items-center px-2 ".concat(l),children:[(0,a.jsx)(W,{method:s,className:" text-base w-16"}),(0,a.jsx)(X.Z,{className:" cursor-pointer"})]})})}var es=t(3339);let et={int:"text-cyan-400",number:"text-blue-600",string:"text-green-600",boolean:"text-lime-400",object:"text-orange-600",array:"text-purple-600"},ea=(0,M.forwardRef)((e,s)=>{let{type:t,onClick:l,...n}=e;return(0,a.jsx)("div",{ref:s,onClick:l,className:"cursor-pointer "+et[t],children:(0,a.jsxs)("span",{...n,children:[" ",t]})})});var el=t(4980);let en=e=>{var s;let{field:t,level:l=0,path:n="",onSelect:i,types:r}=e,[c,d]=(0,M.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between",style:{paddingLeft:"".concat(l,"em")},children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-[1em]",onClick:()=>d(!c),children:(null==t?void 0:t.fields)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(X.Z,{className:"w-4 h-4 cursor-pointer ".concat(c?"":"hidden")}),(0,a.jsx)(el.Z,{className:"w-4 h-4 cursor-pointer ".concat(c?"hidden":"")})]})}),(0,a.jsx)("div",{children:null==t?void 0:t.name})]}),(0,a.jsx)("div",{className:"flex",children:r.includes(t.dataType)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-0.5",children:(0,a.jsx)(ea,{type:null==t?void 0:t.dataType,onClick:()=>i(n,!1)})}),r.includes("array")&&(0,a.jsx)("span",{className:"p-1 text-purple-600 hover:bg-slate-200",onClick:()=>i(n,!0),children:"[ ]"})]})})]}),c&&(null==t?void 0:null===(s=t.fields)||void 0===s?void 0:s.map((e,s)=>(0,a.jsx)(en,{field:e,level:l+1,path:"".concat(n,".").concat(e.name),onSelect:i,types:r},s)))]})};var ei=e=>{let{schema:s,onSelect:t,types:l}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(en,{field:{...s,dataType:"object"},path:s.name,onSelect:t,types:l})})};let er=e=>{var s;if(!(null==e?void 0:e.includes(".")))return e;let t=h(e);return null!==(s=null==t?void 0:t.dataType)&&void 0!==s?s:null==t?void 0:t.name},ec=(0,M.forwardRef)((e,s)=>{let{dataType:t,isArray:l}=e,n=er(t),i=["string","number","int","boolean","object"].includes(null!=n?n:"");return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex",children:[i?(0,a.jsx)(ea,{type:n}):(0,a.jsx)("span",{className:" text-orange-500 cursor-pointer",children:n}),l&&(0,a.jsx)("span",{className:" text-purple-500 cursor-pointer",children:"[ ]"})]}),(null==t?void 0:t.includes("."))&&(0,a.jsxs)("div",{className:" text-xs cursor-pointer",children:[t,l&&(0,a.jsx)("span",{className:" text-purple-500 cursor-pointer",children:"[ ]"})]})]})});function ed(e){let{list:s,value:t,onChange:l,idKey:n,titleKey:i,children:r}=e;return(0,a.jsxs)("div",{className:"flex",children:[s.map(e=>{let s=n?e[n]:e,r=i?e[i]:e;return(0,a.jsx)("div",{className:"p-2 w-24 text-center cursor-pointer border-b-2 border-solid border-transparent ".concat(t===s?"text-blue-400  border-b-blue-400":""),onClick:()=>l(s),children:r},s)}),r]})}var eo=t(4392);t(4040);let eu=(0,M.forwardRef)((e,s)=>{let{overlayClassName:t,children:l,onClose:n,open:i}=e,[r,c]=(0,M.useState)(i),d=(0,M.useRef)(null);(0,M.useEffect)(()=>{if(null==i);else if(c(i),i){var e;null===(e=d.current)||void 0===e||e.show()}else n&&n()},[i]);let o=()=>{c(!0),setTimeout(()=>{var e;null===(e=d.current)||void 0===e||e.show()})},u=()=>{c(!0),setTimeout(()=>{var e;null===(e=d.current)||void 0===e||e.showModal()})},m=()=>{var e;null===(e=d.current)||void 0===e||e.close(),setTimeout(()=>{c(!1)})};return(0,M.useImperativeHandle)(s,()=>({show:o,showModal:u,close:m})),r?(0,a.jsx)("dialog",{ref:d,onClose:e=>{n&&n()},className:" p-0",onClick:e=>{e.stopPropagation(),e.target.parentNode===e.currentTarget&&e.currentTarget.close()},children:(0,a.jsx)("div",{className:" w-screen h-screen fixed top-0 left-0 bg-opacity-25  transition-opacity bg-black z-10 flex items-center justify-center ".concat(t),children:l})}):""});var em=t(138),ex=t(4873),ep=t(7208);function eh(e){let s=(0,M.useRef)(null),{show:t,onClose:l,onChange:n,title:i,value:r}=e;(0,M.useEffect)(()=>{var e,a;t?(null===(e=s.current)||void 0===e||e.show(),r&&d(r)):null===(a=s.current)||void 0===a||a.close()},[t]);let[c,d]=(0,M.useState)(null!=r?r:"");return(0,M.useEffect)(()=>{n(c)},[c]),(0,a.jsx)(eu,{ref:s,onClose:l,children:(0,a.jsxs)("div",{className:"min-w-[40vw] min-h-[25vh] bg-white p-2 rounded-sm",children:[i,(0,a.jsx)(ep.ZP,{className:"h-[60vh] min-h-[60vh]",theme:ex.Pc,value:c,extensions:[(0,em.eJ)()],onChange:d,height:"100%",autoFocus:!0})]})})}let ef=(e,s,t)=>{let a="";return s&&s.some(s=>s.required&&s.message&&(null==e||""===e)?(a=s.message,!0):(s.validator&&(a=(null==s?void 0:s.validator(e,t))||""),!!a)),a},ej=(e,s,t)=>{let a=(0,es.D)(e,s);return e=>e&&t&&t[e]?{...a(e),rules:t[e]}:{...a(e)}},eb=(e,s,t)=>{let a=0,l=(e,n)=>{if(e)return"object"==typeof e&&"type"in e?s(e,n)||(a===t?e:M.cloneElement(e,{...e.props,key:n},l(e.props.children))):Array.isArray(e)?(a++,e.map((e,s)=>l(e,s))):e};return l(e)};var ev=e=>{let{label:s,labelWidth:t,onlyDisplay:l=!1,className:n="",children:i,afterAffix:r="",rules:c=[],value:d,onChange:o,required:u,errMsg:m,errFixed:x=!0,labelTop:p,form:h,starHidden:f,errClassName:j=""}=e,[b,v]=(0,M.useState)(""),g=(0,M.useRef)(d),[N,y]=(0,M.useState)(!1),w=()=>{let e=[...c];u&&e.push({required:u,message:m}),v(ef(d,e,h))};(0,M.useEffect)(()=>{N&&w()},[h,N]),(0,M.useEffect)(()=>{N||d===g.current?N&&w():y(!0)},[d]);let[S,C]=(0,M.useState)(!1);return(0,M.useEffect)(()=>{u?C(!0):c.length&&C(c.some(e=>e.required))},[u,c]),(0,a.jsxs)("div",{className:" inline-flex ".concat(n),children:[(0,a.jsx)("span",{className:" text-red-600 ".concat(S?" visible":f?"hidden":" invisible"),children:"*"}),(0,a.jsxs)("div",{className:"inline-flex ".concat(p?"flex-col":""),children:[(0,a.jsx)("span",{className:" inline-block mr-0.5",style:{width:t},children:s+r}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:" inline-flex",children:l?i:eb(i,(e,s)=>{let t={};if(void 0!==d&&(t={value:d}),void 0!==o&&(t={...t,onChange:o}),"input"===e.type||"select"===e.type||"textarea"===e.type||"function"==typeof e.type)return"checkbox"===e.props.type&&void 0!==d?M.cloneElement(e,{...t,key:s,checked:d}):M.cloneElement(e,{...t,key:s})},1)}),(0,a.jsxs)("div",{className:" text-red-400 text-xs w-full ".concat(j),children:[b,x?(0,a.jsx)(a.Fragment,{children:"\xa0"}):""]})]})]})]})};function eg(e){let{value:s,onChange:t,types:l,showJsonAction:i,disabled:r}=e,c=["string","int","number","boolean","object"].filter(e=>l.includes(e)),d=(0,eo.y_)(),u=o(e=>e.schemaList),m=[{label:d("label.basic"),id:"basic"},{label:d("label.ref"),id:"ref"}],[x,p]=(0,M.useState)("basic"),[h,f]=(0,M.useState)(!1),[b,v]=(0,M.useState)({code:"",required:!1}),g=(0,es.D)(b,v);return(0,a.jsx)($,{placement:"bottom",trigger:"click",disabled:r,content:(e,n)=>(0,a.jsxs)("div",{className:" bg-white drop-shadow-sm",children:[(0,a.jsx)(ed,{list:m,onChange:e=>p(e),value:x,idKey:"id",titleKey:"label",children:i&&(0,a.jsx)("button",{className:" btn bg-green-400",onClick:()=>f(!0),children:d("action.genByJson")})}),(0,a.jsxs)("div",{className:"px-2",children:["basic"===x&&(0,a.jsx)(a.Fragment,{children:c.map(e=>(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(ea,{type:e,onClick:()=>t({...s,dataType:e,fields:"object"===e?s.fields:[],isArray:!1})}),l.includes("array")&&(0,a.jsx)("span",{className:"p-1 text-purple-600 hover:bg-slate-200 cursor-pointer",onClick:()=>t({...s,fields:"object"===e?s.fields:[],dataType:e,isArray:!0}),children:"[ ]"})]},e))}),"ref"===x&&(0,a.jsx)(a.Fragment,{children:u.map((e,n)=>(0,a.jsx)(ei,{schema:e,types:l,onSelect:(e,a)=>{t({...s,isArray:a,dataType:e})}},n))})]})]}),children:(0,a.jsxs)("div",{children:[s.dataType?(0,a.jsx)(ec,{dataType:s.dataType,isArray:s.isArray}):(0,a.jsx)("span",{className:" cursor-pointer text-blue-600",children:d("label.select")}),(0,a.jsx)(eh,{show:h,title:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex mb-2 justify-between",children:[(0,a.jsxs)("span",{children:[" ",d("action.genByJson")]}),(0,a.jsx)("button",{className:"btn ml-8 text-white",disabled:!b.code,onClick:()=>{let e;if(void 0===(e=j(b.code))){n.ZP.error(d("tip.err.inputCorrectJson"));return}e&&U({code:e,required:b.required}).then(e=>{t({...s,fields:e,dataType:"object"})})},children:d("action.gen")})]}),(0,a.jsx)(ev,{label:d("label.fieldDefaultRequired"),children:(0,a.jsx)("input",{type:"checkbox",className:"toggle round text-blue-600",...g.checked("required")})})]}),onChange:g("code").onChange,onClose:()=>f(!1)})]})})}var eN=e=>{let{className:s,children:t,content:l,placement:n}=e;return(0,a.jsx)($,{className:s,placement:n,content:(0,a.jsx)("span",{className:" text-xs bg-black text-white p-0.5",children:l}),children:t})},ey=t(2950);function ew(e){let{value:s,onChange:t,children:l,hover:n}=e;return(0,a.jsx)(a.Fragment,{children:(n||s)&&(0,a.jsx)("div",{className:"p-0.5 ml-[1px] cursor-pointer ".concat(s?"text-red-600":"bg-slate-100","  "),onClick:()=>{t&&t(!s)},children:l})})}function eS(e){let{value:s,onChange:t,showPrimary:l,types:n=[],showJsonAction:i,readonly:r,showUnique:c}=e,d=(0,es.D)(s,t),[o,u]=(0,M.useState)(!1);return(0,a.jsxs)("div",{className:"w-48 flex",onPointerEnter:()=>!r&&u(!0),onPointerLeave:()=>!r&&u(!1),children:[(0,a.jsx)(eg,{types:n,...d(),showJsonAction:i,disabled:r}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex text-sm",children:[l&&(0,a.jsx)(ew,{value:s.primary,onChange:e=>{t&&t({...s,primary:e,required:e})},hover:o,children:"P"}),(0,a.jsx)(ew,{...d("required"),hover:o,children:"*"}),(0,a.jsx)(ew,{...d("nullable"),hover:o,children:"N"}),c&&(0,a.jsx)(ew,{...d("unique"),hover:o,children:"1"})]})})]})}function eC(e){let{className:s,value:t,onChange:l,title:n}=e,[i,r]=(0,M.useState)(!1),[c,d]=(0,M.useState)(""),o=()=>{r(!0),d(null!=t?t:"")},u=e=>{l(e),r(!1)},m=(0,eo.Bs)();return(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)("input",{className:"input w-full",value:t,onChange:e=>{l(e.target.value)},onFocus:()=>o()}),(0,a.jsx)(eh,{show:i,value:c,title:(0,a.jsxs)("div",{className:"flex mb-2 justify-between",children:[(0,a.jsxs)("span",{children:[" ",m("label.inputCode"),"-",n]}),(0,a.jsx)("button",{className:"btn ml-8 text-white",onClick:()=>u(c),children:m("action.save")})]}),onChange:d,onClose:()=>r(!1)})]})}let ek=e=>{let{onAppend:s,onAddChild:t}=e,l=(0,eo.y_)();return t&&s?(0,a.jsx)($,{content:(e,n)=>(0,a.jsx)("div",{className:" drop-shadow-sm bg-white",children:[{id:"sub",label:l("action.addChildNode")},{id:"append",label:l("action.addSiblingNode")}].map(e=>(0,a.jsx)("div",{className:" cursor-pointer",onClick:()=>{"append"===e.id?s&&s():"sub"===e.id&&t()},children:e.label},e.id))}),children:(0,a.jsx)("button",{className:" bg-transparent text-blue-600",children:(0,a.jsx)(V.Z,{className:" text-sm"})})}):t?(0,a.jsx)("button",{className:"bg-transparent text-blue-600",onClick:()=>t&&t(),children:(0,a.jsx)(eN,{content:l("action.addChildNode"),children:(0,a.jsx)(V.Z,{className:" text-sm"})})}):(0,a.jsx)("button",{className:"bg-transparent text-blue-600",onClick:()=>s&&s(),children:(0,a.jsx)(eN,{content:l("action.addSiblingNode"),children:(0,a.jsx)(V.Z,{className:" text-sm"})})})};function eT(e,s,t){var a,l;let n={...s};(null===(a=n.fields)||void 0===a?void 0:a.length)?n.fields.splice(e,1,n.fields[e],{fields:[]}):null===(l=n.fields)||void 0===l||l.push({}),t(n)}function eA(e,s,t){var a;let l={...s};(null===(a=l.fields)||void 0===a?void 0:a.length)&&(l.fields.splice(e,1),t(l))}let eP=e=>{let{value:s,onChange:t,level:l=0,onAppend:n,onDel:i,isRef:r,colConfig:c,type:d,offset:o=0}=e,u=(0,es.D)(s,t),m=(0,eo.y_)(),[x,p]=(0,M.useState)();(0,M.useEffect)(()=>{let e=h(s.dataType);p(null==e?void 0:e.fields)},[s.dataType]),(0,M.useEffect)(()=>{s.name&&void 0===s.dataType&&(s.dataType="string")},[s.name,s.dataType]);let f=0!==l&&void 0!==s.dataType&&void 0===s.name,j=["body","schema"].includes(d)?o:o-1;return(0,a.jsxs)("div",{className:"border border-solid border-transparent ".concat((null==x?void 0:x.length)?"!border-red-500":""),children:[!f&&!(0===l&&"body"!==d)&&(0,a.jsxs)("div",{className:"flex",children:[void 0!==c.name&&(0,a.jsx)("div",{className:c.name.className,style:{paddingLeft:"".concat(j,"em")},children:0===l?(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:" bg-blue-300 text-sm text-white p-0.5",children:m("label.rootNode")})}):(0,a.jsx)("input",{className:"input w-full",...u("name")})}),void 0!==s.name||void 0!==s.dataType?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eS,{...u(),readonly:r,types:["string","number","int","boolean","object","array"],showJsonAction:0===l||!r,showPrimary:1===l&&"schema"===d&&"object"!==s.dataType&&!(null==x?void 0:x.length),showUnique:1===l&&"schema"===d&&"object"!==s.dataType&&!(null==x?void 0:x.length)}),c.defaultValue&&(0,a.jsx)(eC,{title:c.defaultValue.title,...u("defaultValue"),className:c.defaultValue.className}),c.mock&&(0,a.jsx)(eC,{title:c.mock.title,...u("mock"),className:c.mock.className}),c.label&&(0,a.jsx)("div",{className:c.label.className,children:(0,a.jsx)("input",{className:"input w-full",...u("label")})}),c.desc&&(0,a.jsx)("div",{className:c.desc.className,children:(0,a.jsx)("input",{className:"input w-full",...u("desc")})})]}):(0,a.jsx)("div",{className:"flex-1 flex",children:(0,a.jsx)(eg,{types:["object"],...u(),showJsonAction:0===l||!r})}),c.action&&(0,a.jsx)("div",{className:"flex w-32",children:!r&&(0,a.jsxs)(a.Fragment,{children:["object"===s.dataType?(0,a.jsx)(ek,{onAppend:n,onAddChild:()=>{s.fields&&t&&eT(s.fields.length-1,s,t)}}):0!==l&&(0,a.jsx)("div",{className:"flex items-center text-sm ",children:(0,a.jsx)(ek,{onAppend:n})}),0!==l&&(0,a.jsx)("button",{className:" bg-transparent text-red-600",onClick:()=>i&&i(),children:(0,a.jsx)(ey.Z,{className:" text-sm"})})]})})]}),f&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eg,{types:["object"],...u(),showJsonAction:0===l||!r}),(0,a.jsx)("button",{className:"btn",onClick:()=>i&&i(),children:m("action.del")})]})}),(void 0!==s.name||void 0!==s.dataType)&&(0,a.jsxs)(a.Fragment,{children:[s.fields&&s.fields.map((e,n)=>(0,a.jsx)(eP,{level:l+1,offset:f?j:j+1,isRef:r,colConfig:c,type:d,...u("fields[".concat(n,"]")),onAppend:()=>t&&eT(n,s,t),onDel:()=>t&&eA(n,s,t)},n)),(null==x?void 0:x.length)&&x.map((e,n)=>(0,a.jsx)(eP,{level:l+1,offset:f?j:j+1,isRef:!0,colConfig:c,type:d,value:e,onAppend:()=>t&&eT(n,s,t),onDel:()=>t&&eA(n,s,t)},n))]})]})};var eE=e=>{let{config:s,onAdd:t,canAdd:l}=e,n=Object.keys(s).map(e=>({...s[e],key:e}));return(0,a.jsx)("div",{className:"flex",children:n.map(e=>(0,a.jsxs)("div",{className:e.className,children:[(0,a.jsx)("span",{children:e.title}),"action"===e.key&&l&&(0,a.jsx)("button",{onClick:t,className:"btn leading-none bg-transparent p-0 align-middle ",children:(0,a.jsx)(V.Z,{className:"h-[1em] text-blue-700"})})]},e.title))})},eD=e=>{let{value:s,onChange:t}=e,l=(0,es.D)(s,t),n=(0,eo.y_)(),i={name:{title:n("label.fieldName"),className:"w-1/3"},dataType:{title:n("label.dataType"),className:"w-48"},label:{title:n("label.displayName"),className:"w-32"},desc:{title:n("label.desc"),className:"w-32"},action:{title:n("label.operate"),className:"w-32"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eE,{config:i}),(0,a.jsx)(eP,{colConfig:i,...l(),type:"body"})]})},e_=e=>{let{value:s,onChange:t}=e,l=(0,es.D)(s,t);return(0,a.jsx)(eD,{...l("response.body")})};let eO=e=>{let{value:s,onChange:t,level:l=0,onDel:n,colConfig:i,offset:r=0}=e,c=(0,es.D)(s,t),[d,o]=(0,M.useState)(!1);return(0,M.useEffect)(()=>{s.name&&void 0===s.dataType&&(s.dataType="string")},[s.name,s.dataType]),(0,a.jsxs)("div",{className:"border border-solid border-transparent ",children:[0!==l&&(0,a.jsxs)("div",{className:"flex",children:[void 0!==i.name&&(0,a.jsx)("div",{className:i.name.className,children:(0,a.jsx)("input",{className:"input w-full",...c("name")})}),(0,a.jsxs)("div",{className:"w-48 flex",onPointerEnter:()=>o(!0),onPointerLeave:()=>o(!1),children:[(0,a.jsx)(eg,{types:["string","number","int","boolean","array"],...c()}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex text-sm",children:(0,a.jsx)(ew,{...c("required"),hover:d,children:"*"})})})]}),i.label&&(0,a.jsx)("div",{className:i.label.className,children:(0,a.jsx)("input",{className:"input w-full",...c("label")})}),i.desc&&(0,a.jsx)("div",{className:i.desc.className,children:(0,a.jsx)("input",{className:"input w-full",...c("desc")})}),i.action&&(0,a.jsx)("div",{className:"flex w-32",children:0!==l&&(0,a.jsx)("button",{className:" bg-transparent text-red-600",onClick:()=>n&&n(),children:(0,a.jsx)(ey.Z,{className:" text-sm"})})})]}),(void 0!==s.name||void 0!==s.dataType)&&(0,a.jsx)(a.Fragment,{children:s.fields&&s.fields.map((e,n)=>(0,a.jsx)(eO,{level:l+1,colConfig:i,...c("fields[".concat(n,"]")),onDel:()=>t&&eA(n,s,t)},n))})]})};var eR=e=>{let{value:s,onChange:t}=e,l=(0,es.D)(s,t),n=(0,eo.y_)(),i={name:{title:n("label.fieldName"),className:"w-1/3"},dataType:{title:n("label.dataType"),className:"w-48"},label:{title:n("label.displayName"),className:"w-32"},desc:{title:n("label.desc"),className:"w-32"},action:{title:n("label.operate"),className:"w-32"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eE,{config:i,canAdd:!0,onAdd:()=>{var e;let a=null!==(e=null==s?void 0:s.fields)&&void 0!==e?e:[];a.push({dataType:"string"}),t({...s,fields:a})}}),(0,a.jsx)(eO,{colConfig:i,...l()})]})};function eF(e){let{value:s,onChange:t,level:l=0,isRef:n,colConfig:i}=e,r=(0,es.D)(s,t);return(0,M.useEffect)(()=>{s.name&&void 0===s.dataType&&(s.dataType="string")},[s.name,s.dataType]),(0,a.jsxs)("div",{className:"border border-solid border-transparent ",children:[0!==l&&(0,a.jsxs)("div",{className:"flex",children:[void 0!==i.name&&(0,a.jsx)("div",{className:i.name.className,children:(0,a.jsx)("input",{className:"input w-full",...r("name")})}),(0,a.jsxs)("div",{className:"w-48 flex",children:[(0,a.jsx)(eg,{types:["string","number","int","boolean"],...r()}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex text-sm",children:(0,a.jsx)(ew,{value:!0,children:"*"})})})]}),i.label&&(0,a.jsx)("div",{className:i.label.className,children:(0,a.jsx)("input",{className:"input w-full",...r("label")})}),i.desc&&(0,a.jsx)("div",{className:i.desc.className,children:(0,a.jsx)("input",{className:"input w-full",...r("desc")})})]}),(void 0!==s.name||void 0!==s.dataType)&&(0,a.jsx)(a.Fragment,{children:s.fields&&s.fields.map((e,s)=>(0,a.jsx)(eF,{level:l+1,isRef:n,colConfig:i,...r("fields[".concat(s,"]"))},s))})]})}var eL=e=>{let{value:s,onChange:t}=e,l=(0,eo.y_)(),n=(0,es.D)(s,t),i={name:{title:l("label.fieldName"),className:"w-1/3"},dataType:{title:l("label.dataType"),className:"w-48"},label:{title:l("label.displayName"),className:"w-32"},desc:{title:l("label.desc"),className:"w-32"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eE,{config:i}),(0,a.jsx)(eF,{colConfig:i,...n()})]})},eG=e=>{let{value:s,onChange:t}=e,l=(0,es.D)(s,t),[n,i]=(0,M.useState)([{name:"params",count:0},{name:"query",count:0},{name:"body",count:0}]),[r,c]=(0,M.useState)("params");return(0,M.useEffect)(()=>{let e=[...n];["params","query","body"].forEach(t=>{var a,l,n;e.find(e=>e.name==t).count=s.request&&null!==(n=null===(l=s.request[t])||void 0===l?void 0:null===(a=l.fields)||void 0===a?void 0:a.filter(e=>e.name).length)&&void 0!==n?n:0}),i(e)},[s.request]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex",children:n.map(e=>(0,a.jsxs)("div",{className:"  p-2 w-32 text-center cursor-pointer border-b-2 border-solid border-transparent relative ".concat(r===e.name?"text-blue-400  border-b-blue-400":""),onClick:()=>c(e.name),children:[e.name,e.count>0&&(0,a.jsx)("div",{className:"  inline-block bg-green-200 px-1  rounded-3xl absolute -top-0.5 scale-75",children:e.count})]},e.name))}),"params"===r&&(0,a.jsx)(eL,{...l("request.params")}),"query"===r&&(0,a.jsx)(eR,{...l("request.query")}),"body"===r&&(0,a.jsx)(eD,{...l("request.body")})]})},eZ=t(1725),eq=t(8646);function eI(){let e=(0,eq._)(["\n    color: white;\n    padding-left: 1em;\n    margin-top: 0.5em;\n    background: linear-gradient(\n        to right,\n        rgba(88, 106, 197, 0.8),\n        20%,\n        transparent\n    );\n"]);return eI=function(){return e},e}let eJ=t(9183).ZP.div(eI());var eK=t(8070),eB=e=>{let{value:s,onChange:t,onSaved:l}=e,i=(0,eo.y_)();(0,M.useEffect)(()=>{t(s)},[s.path,s.label]);let r=(0,es.D)(s,t);(0,M.useEffect)(()=>{let e=x(s.path),a=[];e.forEach(e=>{var t;let l=null===(t=s.request.params.fields)||void 0===t?void 0:t.find(s=>s.name===e);a.push(null!=l?l:{name:e,dataType:"string"})});let l=JSON.parse(JSON.stringify(s));l.request.params={dataType:"object",fields:null!=a?a:[{dataType:"string",name:""}]},t(l)},[s.path]);let c=async()=>{s.id&&await N(s),n.Am.success(i("tip.success.del")),l&&l(s)},d=o(e=>e.config.baseUrl),u=!(!1===s.auth||void 0===s.auth),m="string"==typeof s.auth?s.auth:"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex sticky top-0 bg-white py-2 z-[1]",children:[(0,a.jsxs)("div",{className:"flex items-center border flex-1",children:[(0,a.jsx)(ee,{...r("method")}),(0,a.jsxs)("span",{className:"border-x px-4 bg-neutral-300 h-full flex items-center",children:[d,"/"]}),(0,a.jsx)("input",{className:"input border-b-transparent pl-2 flex-1 h-full",...r("path"),placeholder:"path"}),(0,a.jsx)(eK.Z,{className:" cursor-pointer text-gray-500",onClick:()=>{let e=d+"/"+s.path;navigator.clipboard.writeText(e).then(()=>{n.Am.success(i("label.copied",{text:e}))})}})]}),(0,a.jsxs)("div",{className:"flex justify-around px-6",children:[(0,a.jsx)("button",{className:"btn mr-0 h-full text-white",onClick:()=>{s.id?g(s).then(()=>{n.Am.success(i("tip.success.modify")),l&&l(s)}):v(s).then(()=>{n.Am.success(i("tip.success.add")),l&&l(s)})},children:i("action.save")}),(0,a.jsx)("button",{className:"btn mx-6 bg-red-500 text-white",onClick:c,children:i("action.del")})]})]}),(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)(ev,{label:i("label.displayName"),errFixed:!1,starHidden:!0,children:(0,a.jsx)("input",{...r("label"),className:"input"})}),(0,a.jsx)(ev,{label:i("label.disable"),children:(0,a.jsx)("input",{type:"checkbox",...r.checked("disabled"),className:"toggle round text-red-600 "})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(ev,{label:i("label.auth"),errFixed:!1,starHidden:!0,children:[(0,a.jsx)("input",{type:"checkbox",checked:u,onChange:e=>t({...s,auth:e.target.checked}),className:"toggle round text-blue-600 "}),u&&(0,a.jsx)("input",{className:"input",type:"text",value:m,onChange:e=>t({...s,auth:!e.target.value||e.target.value})})]})}),(0,a.jsx)(eJ,{children:i("label.request")}),(0,a.jsx)(eG,{...r()}),(0,a.jsx)(eJ,{children:i("label.action")}),(0,a.jsx)(ep.ZP,{theme:eZ.A1,...r("actionCode"),extensions:[(0,em.eJ)()]}),(0,a.jsx)(eJ,{children:i("label.response")}),(0,a.jsx)(e_,{...r()})]})},eU=function(e){let{children:s,labelAfterAffix:t,labelWidth:a,value:l,onChange:n,tagType:i="div",className:r,rule:c,labelTop:d,errFixed:o,errClassName:u}=e,m=ej(l,n,c),x="function"==typeof s?s(m,l):s,p=()=>{if(x)return eb(x,(e,s)=>{if(e.type===ev)return M.cloneElement(e,{afterAffix:t,labelWidth:a,form:l,labelTop:d,errFixed:o,errClassName:u,key:s})})};return"<>"===i?(0,M.createElement)(M.Fragment,{},p()):(0,M.createElement)(i,{className:r},p())};let ez=(0,M.forwardRef)((e,s)=>{let{onClose:t}=e,[l,n]=(0,M.useState)({}),[i,r]=(0,M.useState)(0),c=(0,M.useRef)(null),[d,o]=(0,M.useState)(!1),u=e=>{var s;r(i+1),n(e||{}),o(!1),null===(s=c.current)||void 0===s||s.show()},m=e=>{var s;r(i+1),n(e),o(!0),null===(s=c.current)||void 0===s||s.show()};(0,M.useImperativeHandle)(s,()=>({showAdd:u,showEdit:m,close}));let x=()=>{var e;d?A(l):P({path:"".concat(l.path,".").concat(l.name)}),null===(e=c.current)||void 0===e||e.close()},p=(0,eo.y_)({zh:{addGroup:"新增分组",editGroup:"编辑分组",groupName:"分组名称"},en:{addGroup:"Add Group",editGroup:"Edit Group",groupName:"Group Name"}});return(0,a.jsx)(eu,{ref:c,onClose:t,children:(0,a.jsx)(eU,{value:l,onChange:n,labelAfterAffix:":",errClassName:"w-[16em]",children:e=>(0,a.jsxs)("div",{className:"flex flex-col bg-white px-8 py-4 rounded-lg",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h4",{className:" text-lg mb-4",children:d?p("editGroup"):p("addGroup")}),(0,a.jsx)(ev,{label:p("groupName"),...e("name"),children:(0,a.jsx)("input",{type:"text",className:"input"})}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("button",{className:"btn btn-border mr-4 text-black",onClick:e=>{var s;return null===(s=c.current)||void 0===s?void 0:s.close()},children:p("action.cancel")}),(0,a.jsx)("button",{className:"btn  ",onClick:x,children:p("action.confirm")})]})]})},i)})});var eM=t(9361),eV=t(5317),eH=t(2748);function eW(e){let{apiInfo:s,className:t="",onClick:l,onDrop:n,onDrag:i}=e,r=s.method.toUpperCase(),[c,d]=(0,M.useState)(!1),o=(0,M.useRef)(null),u=(0,eH.Z)(o),[m,x]=(0,M.useState)(!1);return(0,a.jsxs)("div",{className:"px-1 py-1 cursor-pointer border-b border-solid ".concat(s.disabled?"grayscale":""," ").concat(m?" border-b-blue-600":" border-transparent","     ").concat(t,"  "),onClick:l,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onDragEnter:e=>{e.currentTarget.contains(e.relatedTarget)||x(!0)},onDragLeave:e=>{e.currentTarget.contains(e.relatedTarget)||x(!1)},onDragOver:e=>e.preventDefault(),onDrop:()=>{console.log("on---drop"),n&&n(),x(!1)},onDrag:i,draggable:u,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eM.Z,{className:" text-gray-200 cursor-move ".concat(c?"visible":"invisible"," "),ref:o}),(0,a.jsx)(W,{method:r,className:"w-12"}),(0,a.jsx)("div",{children:s.path}),s.auth&&(0,a.jsx)(eV.Z,{className:"ml-2 w-4 h-4"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:s.label||(0,a.jsx)("span",{children:" "})})]})}var eX=t(2626),eQ=t(9424);let eY=e=>{let{group:s,onClick:t,activeApiId:l,onAddApi:n,onAddGroup:i,onDeleteGroup:r,onRenameGroup:c,onDrag:d,onDrop:o}=e,u=s.path?s.path.split(".").length:0,[m,x]=(0,M.useState)(!1),[p,h]=(0,M.useState)(!1),f=(0,eo.y_)({zh:{addGroup:"新增API",addSonGroup:"新增子分组",rename:"重命名",delete:"删除",deleteGroupOnly:"仅删除分组"},en:{addGroup:"New API",addSonGroup:"New Sub Group",rename:"Rename",delete:"Delete",deleteGroupOnly:"Delete Group Only"}}),[j,b]=(0,M.useState)(!1);return(0,a.jsxs)("div",{style:{paddingLeft:2*u+"px"},children:[u>0&&(0,a.jsxs)("div",{className:"flex justify-between pr-1 border-b border-solid ".concat(j?" border-b-blue-600":" border-transparent"," "),onMouseOver:()=>h(!0),onMouseOut:()=>h(!1),onDragEnter:e=>{e.currentTarget.contains(e.relatedTarget)||b(!0)},onDragLeave:e=>{e.currentTarget.contains(e.relatedTarget)||b(!1)},onDrop:()=>{o&&o({group:s}),b(!1)},onDragOver:e=>e.preventDefault(),children:[(0,a.jsxs)("div",{className:"flex items-end cursor-pointer",onClick:()=>{x(!m)},children:[m?(0,a.jsx)(eX.Z,{}):(0,a.jsx)(eQ.Z,{}),(0,a.jsxs)("span",{children:[" ",s.name]}),s.api_count>0&&(0,a.jsxs)("span",{className:" text-sm text-gray-400",children:["(",s.api_count,")"]})]}),p&&(0,a.jsx)($,{placement:"bottom",content:()=>(0,a.jsxs)("div",{className:"flex flex-col bg-white",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>n&&n(s),children:f("addGroup")}),(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{i&&i(s)},children:f("addSonGroup")}),(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{c&&c(s)},children:f("rename")}),(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{r&&r(s,!0)},children:f("delete")}),(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{r&&r(s)},children:f("deleteGroupOnly")})]}),children:(0,a.jsx)("div",{className:" cursor-pointer",children:"..."})})]}),!(u>0&&m)&&(0,a.jsxs)(a.Fragment,{children:[s.children.map((e,s)=>(0,a.jsx)(eY,{group:e,onClick:t,activeApiId:l,onAddGroup:i,onDeleteGroup:r,onRenameGroup:c,onAddApi:n,onDrag:d,onDrop:o},s)),s.apiList.map((e,s)=>(0,a.jsx)(eW,{className:l===e.id?" bg-sky-200":"",apiInfo:e,onClick:()=>{t&&t(e)},onDrag:()=>d&&d(e),onDrop:()=>o&&o({api:e})},s))]})]})};var e$=t(4643);let e0=(e,s,t)=>{let a=s.slice(),l=a.shift(),n=e.children.findIndex(e=>e.name==l);0===a.length?t(e.children[n],n,e):n>-1&&e0(e.children[n],a,t)};var e1=()=>{let[e,s]=(0,M.useState)({name:"",path:"",children:[],apiList:[],api_count:0}),[t,l]=(0,M.useState)();(0,M.useEffect)(()=>{r()},[]);let n=o(e=>e.refreshStore),i=o(e=>e.refreshApiList),r=async()=>{var e;await n();let a=await i();s(m()),l(null!==(e=a.find(e=>e.id===(null==t?void 0:t.id)))&&void 0!==e?e:a[0])},[c,d]=(0,M.useState)(""),[u,x]=(0,M.useState)(!1),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(u)return;let t=p({method:"GET",path:"",response:{}});return s((0,e$.Uy)(s=>{e0(s,e.split(".").slice(1),(e,s,a)=>{a.apiList.push(t)})})),l(t),x(!0),t},[f,j]=(0,M.useState)(),b=(0,eo.y_)(),v=(0,M.useRef)(null);return t?(0,a.jsxs)("div",{className:"flex  h-4 flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col h-full ",children:[(0,a.jsxs)("div",{className:"flex py-2",children:[(0,a.jsx)("input",{className:"input w-[240px]",value:c,onChange:e=>d(e.target.value)}),(0,a.jsx)("button",{className:"btn",children:(0,a.jsx)($,{placement:"bottom",content:(e,s)=>(0,a.jsxs)("div",{className:" bg-white px-1 drop-shadow-sm",children:[(0,a.jsx)("div",{className:" cursor-pointer hover:bg-slate-400",onClick:()=>h(),children:b("action.addApi")}),(0,a.jsx)("div",{className:" cursor-pointer hover:bg-slate-400",onClick:()=>{var e;null===(e=v.current)||void 0===e||e.showAdd({path:"root",name:""})},children:b("action.addGroup")})]}),children:(0,a.jsx)(V.Z,{style:{width:"85%",height:"85%"},stroke:1.5})})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsx)(eY,{group:e,onClick:e=>l(e),activeApiId:null==t?void 0:t.id,onAddGroup:e=>{var s;return null===(s=v.current)||void 0===s?void 0:s.showAdd({name:"",path:"".concat(e.path)})},onDrop:e=>{var s;f&&y({source:f,target:{api:e.api,groupPath:null===(s=e.group)||void 0===s?void 0:s.path}}).then(()=>{r()})},onDrag:e=>j(e),onDeleteGroup:(e,s)=>{E({path:e.path,removeApis:s}).then(e=>{console.log("delete group",e),r()}).catch(e=>{console.error("error deleting",e)})},onRenameGroup:e=>{var s;return null===(s=v.current)||void 0===s?void 0:s.showEdit(e)},onAddApi:e=>h(e.path)})})]}),(0,a.jsx)("div",{className:"flex flex-col flex-1 overflow-y-auto px-1 ",children:t&&(0,a.jsx)(eB,{value:t,onChange:l,onSaved:e=>{e.id||x(!1),r()}},t.id)}),(0,a.jsx)(ez,{ref:v,onClose:r})]}):(0,a.jsx)(a.Fragment,{})},e2=e=>{let{value:s,onChange:t,title:l}=e,i=(0,eo.y_)(),r={name:{title:i("label.fieldName"),className:"w-1/3"},dataType:{title:i("label.dataType"),className:"w-48"},defaultValue:{title:i("label.defaultValue"),className:"w-48"},mock:{title:i("label.mockData"),className:"w-48"},desc:{title:i("label.desc"),className:"w-32"},action:{title:i("label.operate"),className:"w-32"}},[c,d]=(0,M.useState)(!1),[o,u]=(0,M.useState)({code:"",required:!1}),m=(0,es.D)(o,u);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[l,(0,a.jsx)("button",{className:" btn bg-green-400",onClick:()=>d(!0),children:i("action.genByJson")})]}),(0,a.jsx)(eE,{config:r,canAdd:!0,onAdd:()=>{var e;let a=null!==(e=null==s?void 0:s.fields)&&void 0!==e?e:[];a.push({}),t({...s,fields:a})}}),(0,a.jsx)(eP,{colConfig:r,value:s,onChange:e=>t(e),type:"schema"}),(0,a.jsx)(eh,{show:c,title:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex mb-2 justify-between",children:[(0,a.jsxs)("span",{children:[" ",i("action.genByJson")]}),(0,a.jsx)("button",{className:"btn ml-8 text-white",disabled:!o.code,onClick:()=>{let e;if(void 0===(e=j(o.code))){n.ZP.error(i("tip.err.inputCorrectJson"));return}e&&U({code:e,required:o.required}).then(e=>{t({...s,fields:e})})},children:i("action.gen")})]}),(0,a.jsx)(ev,{label:i("label.fieldDefaultRequired"),children:(0,a.jsx)("input",{type:"checkbox",className:"toggle round text-blue-600",...m.checked("required")})})]}),onChange:m("code").onChange,onClose:()=>d(!1)})]})};let e4=e=>{let{type:s,className:t="",showLabel:l}=e;return"table"===s?(0,a.jsxs)("div",{className:"inline-flex",children:[(0,a.jsx)("div",{className:"".concat(t," text-purple-600 font-bold inline-block"),children:"[ ]"}),l&&(0,a.jsx)("span",{children:"Table"})]}):"json"===s?(0,a.jsxs)("div",{className:"inline-flex",children:[(0,a.jsx)("div",{className:"".concat(t," text-orange-600 font-bold inline-block"),children:"{ }"}),l&&(0,a.jsx)("span",{children:"JSON"})]}):(0,a.jsxs)("div",{className:"inline-flex",children:[(0,a.jsx)("div",{className:"".concat(t,"  text-blue-600 font-bold inline-block w-4"),children:"N"}),l&&(0,a.jsx)("span",{children:"No Data"})]})};var e6=e=>{let{value:s,onChange:t,options:l}=e;return(0,a.jsx)($,{placement:"bottom",content:(e,s)=>(0,a.jsx)("div",{className:" bg-white shadow w-30 p-1",children:l.map((e,s)=>(0,a.jsx)("div",{className:" cursor-pointer",onClick:()=>t(e.value),children:(0,a.jsx)(e4,{type:e.value,showLabel:!0})},s))}),children:(0,a.jsxs)("div",{className:"w-30 flex justify-between cursor-pointer",children:[(0,a.jsx)(e4,{type:s,showLabel:!0}),(0,a.jsx)(X.Z,{})]})})};let e3=[{label:"Table",value:"table",mark:"[ ]",activeClassName:"!text-purple-600",active:!0},{label:"JSON",value:"json",mark:"{ }",activeClassName:"!text-orange-600",active:!0},{label:"No Data",value:void 0,mark:"N",activeClassName:"!text-blue-600",active:!0}];function e8(e){let{value:s,onChange:t,labelWidth:l="em"}=e,n=(0,es.D)(s,t),i=(0,eo.y_)();return(0,a.jsxs)(eU,{labelWidth:l,children:[(0,a.jsx)(eJ,{children:"Schema"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(ev,{label:i("label.storeType"),children:(0,a.jsx)(e6,{options:e3.filter(e=>e.value),...n("storageType")})}),(0,a.jsx)(ev,{label:i("label.primaryKeys"),children:(0,a.jsx)("input",{className:"input",value:s.primaryKeys.join(","),onChange:e=>{let a=structuredClone(s);a.primaryKeys=e.target.value.split(","),t(a)}})}),(0,a.jsx)(ev,{label:i("label.fieldDefaultRequired"),children:(0,a.jsx)("input",{type:"checkbox",className:"toggle round text-blue-600",...n.checked("fieldRequired")})}),(0,a.jsx)(e2,{title:(0,a.jsx)(ev,{labelWidth:l,label:i("label.defaultFields")}),...n()})]})]})}var e5=t(7924),e7=function(e){let{value:s,onChange:t,className:l="",lineNumbers:n=!1}=e,i=(0,M.useRef)(),r=(0,M.useRef)();return(0,M.useEffect)(()=>(r.current=new e5.tk({doc:s,parent:i.current,extensions:[(0,ep.Xy)({lineNumbers:n}),(0,em.eJ)(),ex.Pc,e5.tk.updateListener.of(e=>{e.docChanged&&t&&t(e.state.toJSON().doc)})]}),()=>{var e;null===(e=r.current)||void 0===e||e.destroy()}),[]),(0,a.jsx)("div",{ref:i,className:"container ".concat(l)})},e9=()=>{let[e,s]=(0,M.useState)(),t=(0,es.D)(e,s),l=o(e=>e.refreshConfig),i=(0,eo.y_)({zh:{label:{apiAgent:"代理",targetUrl:"目标URL",basicConfig:"基本配置",configName:"配置名称",resSuccess:"正常响应res.success",resError:"错误处理res.error"},tip:{setSuccess:"设置成功"}},en:{label:{apiAgent:"API Agent",targetUrl:"Target URL",basicConfig:"Basic Config",configName:"Config Name",resSuccess:"Success Response : res.success",resError:"Error Response : res.error"},tip:{setSuccess:"Set Success"}}});if((0,M.useEffect)(()=>{l().then(e=>s(e))},[]),(0,M.useEffect)(()=>{},[e]),e)return(0,a.jsxs)("div",{className:"flex flex-col flex-1 min-h-[80vh] overflow-y-auto ",children:[(0,a.jsx)("div",{className:"sticky top-0 flex justify-end px-4",children:(0,a.jsx)("button",{className:"btn",onClick:()=>{T(e).then(e=>{n.ZP.success(i("tip.setSuccess"))})},children:i("action.save")})}),(0,a.jsxs)(eU,{labelWidth:"14em",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(eJ,{children:i("label.apiAgent")}),(0,a.jsx)(ev,{label:i("label.enable"),children:(0,a.jsx)("input",{type:"checkbox",className:"toggle round text-blue-600 ",...t.checked("proxy.enabled")})}),(0,a.jsx)(ev,{label:i("label.targetUrl"),children:(0,a.jsx)("input",{className:"input min-w-60 w-[30vw]",...t("proxy.target")})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(eJ,{children:i("label.basicConfig")}),(0,a.jsx)(ev,{label:i("label.urlPrefix"),children:(0,a.jsx)("input",{className:"input min-w-60 w-[30vw]",...t("baseUrl")})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(eJ,{children:"Mock"}),(0,a.jsx)(ev,{label:"string",children:(0,a.jsx)(e7,{...t("mock.string")})}),(0,a.jsx)(ev,{label:"int",children:(0,a.jsx)(e7,{...t("mock.int")})}),(0,a.jsx)(ev,{label:"number",children:(0,a.jsx)(e7,{...t("mock.number")})}),(0,a.jsx)(ev,{label:"boolean",children:(0,a.jsx)(e7,{...t("mock.boolean")})})]}),(0,a.jsx)(e8,{labelWidth:"14em",...t("schema")}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(eJ,{children:"API"}),(0,a.jsx)(ev,{label:i("label.resSuccess"),children:(0,a.jsx)(e7,{...t("api.responseCode")})}),(0,a.jsx)(ev,{label:i("label.resError"),children:(0,a.jsx)(e7,{...t("api.errorCode")})}),(0,a.jsx)(ev,{label:i("label.auth"),children:(0,a.jsx)(e7,{...t("api.authCode")})})]})]})]})},se=e=>{let{value:s,onChange:t}=e;return(0,a.jsx)("div",{className:"flex",children:e3.map(e=>(0,a.jsx)(eN,{content:e.label,children:(0,a.jsx)("div",{className:"text-gray-400 font-bold  ml-2 px-1 cursor-pointer select-none ".concat(s.includes(e.value)?e.activeClassName:""),onClick:()=>{let a=s.findIndex(s=>s===e.value);if(-1===a)t([...s,e.value]);else{let e=[...s];e.splice(a,1),t(e)}},children:e.mark})},e.label))})};let ss=e=>{let{showAddBtn:s,onSelectChange:t}=e,l=o(e=>e.refreshSchemaList),n=o(e=>e.schemaList),i=o(e=>e.newSchema),r=o(e=>e.setNewSchema),c=o(e=>e.selectedSchemaIndex),d=o(e=>e.setSelectedSchemaIndex),[u,m]=(0,M.useState)(),[x,p]=(0,M.useState)([]);(0,M.useEffect)(()=>{let e=[...n];i&&e.push(i),p(e)},[n,i]),(0,M.useEffect)(()=>{i&&d(n.length)},[i]),(0,M.useEffect)(()=>{if(x.length){let e=null!=c?c:0;e<x.length&&e>0||(e=0),d(e),m(x[e])}else m(void 0)},[x,c]),(0,M.useEffect)(()=>{t(u)},[u]),(0,M.useEffect)(()=>{l()},[]);let[h,f]=(0,M.useState)(["json","table",void 0]),[j,b]=(0,M.useState)([]);(0,M.useEffect)(()=>{b(x.filter(e=>h.includes(e.storageType)))},[h,x]);let v=o(e=>e.config.schema);return(0,a.jsxs)("div",{className:"flex flex-col h-full w-[240px]",children:[(0,a.jsxs)("div",{className:"flex py-2",children:[(0,a.jsx)("input",{className:"input flex-1"}),s&&(0,a.jsx)("button",{className:"btn",onClick:()=>{i||r({label:"",name:"",storageType:v.storageType,fields:[...v.fields]})},children:(0,a.jsx)(V.Z,{style:{width:"85%",height:"85%"},stroke:1.5})})]}),(0,a.jsx)(se,{value:h,onChange:f}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:j.map((e,s)=>(0,a.jsxs)("div",{className:" p-2 cursor-pointer ".concat(e.name===(null==u?void 0:u.name)?"bg-sky-200":""),onClick:()=>d(s),children:[(0,a.jsx)(e4,{type:e.storageType}),e.name]},e.name))})]})};function st(e){let{value:s,onChange:t,className:l,min:n,max:i}=e;return(0,a.jsx)("input",{type:"number",min:n,max:i,className:l,value:s,onChange:e=>{let s=Number(e.target.value),a=!0;(i&&s>i||n&&s<n)&&(a=!1),a&&t&&t(s)}})}var sa=function(e){let{cols:s=[],list:t=[],className:l="",headClassName:n="",tdClassName:i="",thClassName:r="",onRow:c}=e,d=e=>c?c(e):void 0;return(0,a.jsxs)("table",{className:l,children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:n,children:s.map(e=>{var s;return(0,a.jsx)("th",{className:"".concat(r," ").concat(null!==(s=e.thClassName)&&void 0!==s?s:""," "),children:e.headRender?e.headRender:e.title},e.prop)})})}),(0,a.jsx)("tbody",{children:t.map((e,t)=>(0,a.jsx)("tr",{...d(e),children:s.map(s=>{var l;return(0,a.jsx)("td",{className:"".concat(i," ").concat(null!==(l=s.tdClassName)&&void 0!==l?l:""),children:s.render?"function"==typeof s.render?s.render(e):s.render:"index"===s.prop?t+1:"object"==typeof e[s.prop]?JSON.stringify(e[s.prop]):e[s.prop]},s.prop)})},t))})]})},sl=t(8824),sn=t(4472);function si(e){let{list:s,schema:t,refresh:l}=e,i="border border-s border-blue-600 text-center",r=(0,eo.y_)(),c=e=>{F({schema:t,item:e}).then(()=>{n.ZP.success(r("tip.success.del")),l&&l()})},d=[{title:r("label.operate"),prop:"action",render:e=>(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(sl.Z,{className:" cursor-pointer text-blue-600 mr-2",onClick:()=>p(e)}),(0,a.jsx)(sn.Z,{className:" cursor-pointer text-red-600",onClick:()=>c(e)})]})},...t.fields.map(e=>({title:e.name,prop:e.name}))],[o,u]=(0,M.useState)(!1),[m,x]=(0,M.useState)(""),p=e=>{var s;u(!0),x(null!==(s=JSON.stringify(e))&&void 0!==s?s:"")},h=()=>{L({schema:t,item:JSON.parse(m)}).then(()=>{u(!1),n.ZP.success(r("tip.success.modify")),l&&l()})};return(0,a.jsxs)("div",{className:"flex flex-col overflow-x-auto flex-1 overflow-y-auto",children:[(0,a.jsx)(sa,{cols:d,list:s,thClassName:i+" px-2 ",tdClassName:i,className:"border border-s border-blue-600 border-collapse  ml-4",headClassName:"bg-blue-200 sticky top-[-0.1px]"}),(0,a.jsx)(eh,{show:o,value:m,title:(0,a.jsxs)("div",{className:"flex mb-2 justify-between",children:[(0,a.jsx)("span",{children:r("action.edit")}),(0,a.jsx)("button",{className:"btn ml-8 text-white",onClick:()=>h(),children:r("action.save")})]}),onChange:x,onClose:()=>u(!1)})]})}function sr(e){let{schema:s}=e,t=(0,eo.y_)(),[l,i]=(0,M.useState)([]),r=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_({name:s.name}).then(s=>{i(s),e&&n.ZP.success(t("tip.success.refreshed"))})};(0,M.useEffect)(()=>{r()},[s]);let[c,d]=(0,M.useState)({amount:10,replace:!0}),o=(0,es.D)(c,d),[u,m]=(0,M.useState)(!1),[x,p]=(0,M.useState)(""),h=()=>{let e;if(void 0===(e=j(x))){n.ZP.error(t("tip.err.inputCorrectJson"));return}Array.isArray(e)||(e=[e]),G({schemaName:s.name,items:e}).then(e=>{n.ZP.success(t("tip.success.import")),r()})};return(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-y-auto px-1 pb-2",children:[(0,a.jsxs)("div",{className:"flex justify-between sticky top-0 bg-white py-2 pl-4",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{children:[t("label.amount"),"：",l.length]}),(0,a.jsx)("button",{className:"btn ml-4 bg-red-400",onClick:()=>{R({name:null==s?void 0:s.name}).then(()=>{n.ZP.success(t("tip.success.schemaDataEmpty",{schema:s.name})),r()})},children:t("action.emptyData")})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"btn ml-4",children:[t("action.importFromXlsx"),(0,a.jsx)("input",{type:"file",className:"input hidden",onChange:e=>{let a=e.target.files?e.target.files[0]:void 0;if(a){let l=new FormData;l.append("schemaName",s.name),l.append("file",a),Z(l).then(e=>{n.ZP.success(t("tip.success.import")),r()}).finally(()=>{e.target.value=""})}else n.ZP.error(t("tip.err.selectNoFile"))}})]}),(0,a.jsx)("button",{className:"btn ml-4",onClick:()=>{m(!0)},children:t("action.importFromJson")}),(0,a.jsx)(ev,{label:t("label.addAmount"),errFixed:!1,children:(0,a.jsx)(st,{...o("amount"),className:"w-24 input"})}),(0,a.jsx)("button",{className:"btn ml-4",onClick:()=>{O({...c,name:s.name}).then(()=>{n.ZP.success(t("tip.success.dataAdd",{num:c.amount})),r()})},children:t("action.addData")}),(0,a.jsx)("button",{className:"btn ml-4",onClick:()=>r(!0),children:t("action.refresh")})]})]}),s&&(0,a.jsx)(si,{list:l,schema:s,refresh:()=>r()}),(0,a.jsx)(eh,{show:u,title:(0,a.jsxs)("div",{className:"flex mb-2 justify-between",children:[(0,a.jsx)("span",{children:"从JSON导入"}),(0,a.jsx)("button",{className:"btn ml-8 text-white",disabled:!x,onClick:()=>h(),children:"导入"})]}),onChange:p,onClose:()=>m(!1)})]})}function sc(e){let{schema:s}=e,[t,l]=(0,M.useState)(""),i=()=>{_({name:s.name}).then(e=>{l(JSON.stringify(e).replaceAll(",",",\n"))})};(0,M.useEffect)(()=>{i()},[s]);let r=(0,eo.y_)(),[c,d]=(0,M.useState)(!1);return(0,M.useEffect)(()=>{t&&!c&&d(!0)},[t]),(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-y-auto",children:[(0,a.jsx)("div",{className:"flex justify-end sticky top-0 bg-white py-2 pl-10 pr-20",children:(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"btn ml-4",onClick:()=>{let e=j(t);if(void 0===e){n.ZP.error(r("tip.err.inputCorrectJson"));return}q({schemaName:s.name,data:JSON.stringify(e)}).then(()=>{n.ZP.success(r("tip.success.modify"))})},children:r("action.save")})})}),(0,a.jsx)(e7,{className:"flex-1 h-full",value:t,onChange:l,lineNumbers:!0},String(c))]})}var sd=()=>{let[e,s]=(0,M.useState)();return(0,a.jsxs)("div",{className:"flex flex-1  h-[80vh]",children:[(0,a.jsx)(ss,{onSelectChange:s}),(null==e?void 0:e.id)&&(0,a.jsxs)(a.Fragment,{children:[(null==e?void 0:e.storageType)==="table"&&(0,a.jsx)(sr,{schema:e}),(null==e?void 0:e.storageType)==="json"&&(0,a.jsx)(sc,{schema:e})]})]})};function so(e){let{value:s,onChange:t,storageType:l}=e,n=(0,eo.y_)(),i=(0,es.D)(s,t),r=async()=>{let e=await w({storageType:l});t({...s,apiList:e})};return(0,M.useEffect)(()=>{r()},[l]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(ev,{label:n("label.urlPrefix"),children:(0,a.jsx)("input",{className:"input",...i("baseUrl")})}),(0,a.jsx)(ev,{label:n("label.apiSortedBySchema"),children:(0,a.jsx)("input",{className:"toggle round text-blue-600",type:"checkbox",...i.checked("enableGroupBySchema")})}),(0,a.jsx)(ev,{label:n("label.pageIndexKey"),children:(0,a.jsx)("input",{className:"input",...i("pageIndexKey")})}),(0,a.jsx)(ev,{label:n("label.pageSizeKey"),children:(0,a.jsx)("input",{className:"input",...i("pageSizeKey")})})]}),(0,a.jsxs)("div",{className:"flex flex-col pl-8 flex-1",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-32",children:n("label.enable")}),(0,a.jsx)("div",{className:"w-24",children:"Method"}),(0,a.jsx)("div",{children:"URL"})]}),s.apiList.map((e,s)=>(0,a.jsxs)("div",{className:"flex mb-2",children:[(0,a.jsxs)("label",{className:"w-32",children:[(0,a.jsx)("input",{type:"checkbox",className:"checkbox mr-2",...i.checked("apiList[".concat(s,"].enable"))}),(0,a.jsx)("span",{children:e.dataAction})]}),(0,a.jsx)(ee,{...i("apiList[".concat(s,"].method"))}),(0,a.jsx)("input",{className:"input flex-1",...i("apiList[".concat(s,"].path"))})]},s))]})]})})}function su(e){let s=(0,M.useRef)(null),{show:t,onClose:l,schema:i}=e,r=(0,eo.y_)();(0,M.useEffect)(()=>{var e,a;t?null===(e=s.current)||void 0===e||e.show():null===(a=s.current)||void 0===a||a.close()},[t]);let[c,d]=(0,M.useState)({enableGroupBySchema:!0,baseUrl:"",apiList:[],pageIndexKey:"page",pageSizeKey:"limit"});return(0,a.jsx)(eu,{ref:s,onClose:l,children:(0,a.jsxs)("div",{className:"min-w-[60vw] min-h-[25vh] bg-white p-2 rounded-sm",children:[(0,a.jsxs)("h3",{className:"text-lg mb-4",children:["  ",r("action.genApi")]}),i.storageType&&(0,a.jsx)(so,{value:c,onChange:d,storageType:i.storageType}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"btn text-white",onClick:()=>{C({schemaName:i.name,config:c}).then(e=>{n.ZP.success(r("tip.success.gen"))})},children:r("action.genApi")})})]})})}var sm=e=>{let{schema:s,saved:t}=e,[l,i]=(0,M.useState)(null!=s?s:{fields:[{}]}),r=(0,es.D)(l,i),c=(0,eo.y_)(),d=o(e=>e.setNewSchema),u=async()=>{l.id?await B(l):d(void 0),n.ZP.success(c("tip.success.del")),t&&t()},[m,x]=(0,M.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex mb-4 justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(e6,{options:e3,value:l.storageType,onChange:e=>{i({...l,storageType:e})}}),(0,a.jsx)("input",{className:"input",...r("name"),placeholder:c("label.name")})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("button",{onClick:()=>{l.id?K(l).then(()=>{n.ZP.success(c("tip.success.modify")),t&&t()}):J(l).then(()=>{n.ZP.success(c("tip.success.add")),d(void 0),t&&t()})},className:"btn ml-4 text-white",children:c("action.save")}),(0,a.jsx)("button",{className:"btn ml-4 text-white bg-red-500",onClick:()=>u(),children:c("action.del")}),s.id&&(0,a.jsx)("button",{className:"btn ml-4 text-white",onClick:()=>{x(!0)},children:c("action.genApi")})]})]}),(0,a.jsx)(e2,{...r()}),(0,a.jsx)(su,{schema:s,show:m,onClose:()=>x(!1)})]})},sx=()=>{let[e,s]=(0,M.useState)(),t=o(e=>e.refreshSchemaList);return(0,a.jsxs)("div",{className:"flex h-[80vh] flex-1 ",children:[(0,a.jsx)(ss,{showAddBtn:!0,onSelectChange:s}),(0,a.jsx)("div",{className:"flex flex-col flex-1 overflow-auto px-1 py-2",children:e&&(0,a.jsx)(sm,{schema:e,saved:t},e.name)})]})};let sp={data:{amount:23},schema:{storageType:"table",fields:[],primaryKeys:["id","uid","gid","uuid"],dataType:"object"},api:{baseUrl:"",enableGroupBySchema:!0,apiList:[],pageIndexKey:"page",pageSizeKey:"limit"}};var sh=()=>{let[e,s]=(0,M.useState)(""),t=o(e=>e.config),[l,i]=(0,M.useState)({...sp,schema:t.schema}),r=(0,es.D)(l,i),c=(0,eo.y_)(),d=async()=>{let s;if(void 0===(s=j(e))){n.ZP.error(c("tip.err.inputCorrectJson"));return}S({code:s,config:{...l,api:{...l.api}}}).then(e=>{n.ZP.success(c("tip.success.gen"))})};return(0,a.jsxs)("div",{className:"flex h-[80vh] flex-1",children:[(0,a.jsxs)("div",{className:"w-80 flex flex-col   px-1 py-2",children:[(0,a.jsx)(eJ,{children:"JSON"}),(0,a.jsx)(ep.ZP,{className:"flex-1",theme:ex.Pc,value:e,extensions:[(0,em.eJ)()],onChange:s,height:"100%"})]}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-auto px-1 py-2",children:[(0,a.jsx)("div",{className:"sticky top-0 flex justify-end px-4",children:(0,a.jsx)("button",{className:" btn",onClick:d,children:c("action.batchGen")})}),(0,a.jsxs)(eU,{labelWidth:"12em",children:[(0,a.jsx)(eJ,{children:"Data"}),(0,a.jsx)(ev,{label:c("label.genAmount"),children:(0,a.jsx)("input",{className:"input",type:"number",...r("data.amount")})}),(0,a.jsx)(e8,{labelWidth:"12em",...r("schema")}),(0,a.jsx)(eJ,{children:"API"}),(0,a.jsx)(so,{value:l.api,onChange:e=>i({...l,api:e}),storageType:l.schema.storageType})]})]})]})},sf=t(8452),sj=t(2773),sb=t(1758);function sv(){let{lang:e,setLang:s}=(0,eo.Kx)(),t=e=>{s(e)},[l,n]=(0,M.useState)(!1);(0,M.useEffect)(()=>{if(l)localStorage.setItem("lang",e);else{let t=localStorage.getItem("lang");t?s(t):localStorage.setItem("lang",e),n(!0)}},[e]);let i="cursor-pointer hover:bg-blue-200 px-2 hover:text-white";return(0,a.jsx)($,{placement:"bottom",content:()=>(0,a.jsxs)("div",{className:"flex flex-col bg-white py-2 drop-shadow-lg",children:[(0,a.jsx)("div",{className:i,onClick:()=>t("zh"),children:"中文"}),(0,a.jsx)("div",{className:i,onClick:()=>t("en"),children:"English"})]}),children:(0,a.jsx)(sb.Z,{className:" scale-125 mr-4 hover:text-blue-400 cursor-pointer"})})}let sg=["API","Schema","Data","Settings","Quick"];function sN(){let[e,s]=(0,M.useState)("API"),[t,l]=(0,M.useState)(!1),i=o(e=>e.refreshStore);(0,M.useEffect)(()=>{i().then(()=>l(!0))},[]);let r=(0,eo.Bs)(),[c,d]=(0,M.useState)(!1);return(0,a.jsxs)("main",{className:"flex h-[100vh] max-h-[100vh] flex-col w-[100vw]",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(ed,{list:sg,value:e,onChange:s}),(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[c?(0,a.jsx)("span",{className:"animate-spin mr-4 ",children:(0,a.jsx)(sf.Z,{className:" cursor-wait scale-125 "})}):(0,a.jsx)(eN,{content:r("action.refreshApiService"),placement:"bottom",children:(0,a.jsx)(sj.Z,{className:"mr-4 cursor-pointer scale-125",onClick:()=>{d(!0),z().then(()=>{n.ZP.success(r("tip.success.refreshed"))}).finally(()=>{d(!1)})}})}),(0,a.jsx)(sv,{})]})]}),t&&(0,a.jsxs)(a.Fragment,{children:["API"===e&&(0,a.jsx)(e1,{}),"Schema"===e&&(0,a.jsx)(sx,{}),"Data"===e&&(0,a.jsx)(sd,{}),"Settings"===e&&(0,a.jsx)(e9,{}),"Quick"===e&&(0,a.jsx)(sh,{})]}),(0,a.jsx)(n.x7,{})]})}},4392:function(e,s,t){"use strict";t.d(s,{fw:function(){return i},NA:function(){return c},Bs:function(){return a},Kx:function(){return l},y_:function(){return n}});let{tMessages:a,useGrigContext:l,useMessages:n,GrigProvider:i,getLang:r,addLangChangeCallback:c}=(0,t(3549).e)({lang:"zh",fallbackLang:"en"},{zh:{label:{name:"名称",fieldName:"字段名称",dataType:"数据类型",defaultValue:"默认值",mockData:"模拟数据",desc:"描述",operate:"操作",action:"动作",amount:"数量",addAmount:"添加数量",genAmount:"生成数据条数",enable:"启用",disable:"禁用",urlPrefix:"前置URL",pageIndexKey:"页码Key",pageSizeKey:"每页大小Key",apiSortedBySchema:"API按Schema分组",displayName:"显示名",request:"请求",response:"响应",storeType:"存储方式",primaryKeys:"主键可选Keys",fieldDefaultRequired:"字段默认必需",defaultFields:"默认字段",rootNode:"根节点",or:"或",unlink:"解除关联",select:"选择类型",ref:"引用",basic:"基本",inputCode:"填写代码",auth:"权限"},action:{refresh:"刷新",add:"添加",del:"删除",save:"保存",edit:"编辑",confirm:"确定",cancel:"取消",batchGen:"批量生成",emptyData:"清空数据",addData:"添加数据",importFromXlsx:"从xlsx导入",importFromJson:"从json导入",genByJson:"根据JSON生成",addGroup:"新增分组",addApi:"新增API",addSiblingNode:"新增相邻节点",addChildNode:"新增子节点",gen:"生成",genApi:"生成API",refreshApiService:"刷新API服务"},tip:{success:{add:"添加成功",del:"删除成功",modify:"修改成功",dataAdd:"{num}条数据已添加成功",schemaDataEmpty:"{schema} 已清空",gen:"生成成功",import:"导入成功",refreshed:"已刷新",copied:"已复制: {text}"},err:{inputCorrectJson:"请输入正确的JSON",selectNoFile:"请选择文件"}}},en:{label:{name:"Name",fieldName:"Field Name",dataType:"Data Type",defaultValue:"Default Value",mockData:"Mock Data",desc:"Description",operate:"Operation",action:"Action",amount:"Amount",addAmount:"Add Amount",genAmount:"Generate Data Amount",enable:"Enable",disable:"Disable",urlPrefix:"URL Prefix",pageIndexKey:"Page Index Key",pageSizeKey:"Page Size Key",apiSortedBySchema:"API sorted by Schema",displayName:"Display Name",request:"Request",response:"Response",storeType:"StoreType",primaryKeys:"Primary Keys",fieldDefaultRequired:"Field Default Required",defaultFields:"Default Fields",rootNode:"Root",or:" Or ",unlink:"Unlink",select:"Select",ref:"Ref",basic:"Basic",inputCode:"Input Code ",auth:"Authorization",copied:"Copied: {text}"},action:{refresh:"Refresh",add:"Add",del:"Del",save:"Save",edit:"Edit",confirm:"Confirm",cancel:"Cancel",batchGen:"Batch Generate",emptyData:"Empty Data",addData:"Add Data",importFromXlsx:"Import From xlsx",importFromJson:"Import From Json",genByJson:"Generate by Json",addGroup:"Add Group",addApi:"Add API",addSiblingNode:"Add a Sibling Node",addChildNode:"Add a Child Node",gen:"Generate",genApi:"Generate APIs",refreshApiService:"Refresh API Service"},tip:{success:{add:"Add Success",del:"Delete Success",modify:"Modified Success",dataAdd:"{num} data added Success",schemaDataEmpty:"{schema} Emptied Success",gen:"Generate Success",import:"Import Success",refreshed:"Refreshed"},err:{inputCorrectJson:"Please Input Correct Json",selectNoFile:"Please Select a File"}}}})}},function(e){e.O(0,[401,932,971,23,744],function(){return e(e.s=5449)}),_N_E=e.O()}]);